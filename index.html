<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>ROW, ROW, ROWG ALIKE</title>
    <link href="css/style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <!--<script src="js/script.js"></script>-->
    <script src="js/game.js"></script>
    <script src="js/map.js"></script>
    <script src="js/monster.js"></script>
    <script src="js/spell.js"></script>
    <script src="js/tile.js"></script>
    <script src="js/util.js"></script>
    <script src="js/pathFinder.js"></script>
    <script src="js/binomial.js"></script>
    <!--<p id="blood" style="background-image: linear-gradient(to right, red, red, red, red, red, red, red, red, red, red, red, red, red, red, red, red, red, red, red, red, red, red, red, red, blue)">Bloood: |||||||||||||||||||| <br>-->
    <!--<button>-->
      <!--Money: ||||||||||||||||||||--></p>
    <canvas id="canvas">
      
    </canvas>

    

    <script>
      tileSize = 32;
      numTiles = 20;
      uiWidth = 20;
      uiHeight = 1;
      floorLevel = 1; //floors.
      //ctx.fillRect(0,0,20,20,20);   
      
      //spriteState = 0;
      spritesheet = new Image();
      spritesheet.src = 'images/spritesheet1.png';
      spritesheet.onload = showTitle;
      spritesheetDark = new Image();
      spritesheetDark.src = 'images/spritesheet1Dark.png';
      //spritesheetDark.onload = showTitle;
      
      viewImageList = ["default.png","mimic.png","slime.png"];
      viewImage = viewImageList[0];
      var viewImageElement = document.createElement("IMG");
      viewImageElement.setAttribute("src", "images/" + viewImage);
      viewImageElement.setAttribute("width", "320");
      viewImageElement.setAttribute("height", "320");

      var textChannels = [];
      textChannels.push(channel1 = new textChannel("...","red",32*(numTiles+1),260) );
      textChannels.push(channel2 = new textChannel("...","red",32*(numTiles+1),240) );
      textChannels.push(channel3 = new textChannel("...","red",32*(numTiles+1),220) );
      textChannels.push(channel4 = new textChannel("...","red",32*(numTiles+1),200) );
      textChannels.push(channel5 = new textChannel("...","red",32*(numTiles+1),180) );
      textChannels.push(channel6 = new textChannel("...","red",32*(numTiles+1),160) );
      textChannels.push(channel7 = new textChannel("...","red",32*(numTiles+1),140) );
      textChannels.push(channel8 = new textChannel("...","red",32*(numTiles+1),120) );
      textChannels.push(channel9 = new textChannel("...","red",32*(numTiles+1),100) );

                             
      gameState = "loading";  

      document.querySelector("html").onkeypress = function(e){
        if(gameState == "title"){                              
          startGame();                
        } if(gameState == "dead"){                             
          showTitle();                                        
        } if(gameState == "running"){ 
        //prevX = x;
        //prevY = y;
        
        if(e.key=="7") { player.tryMove(-1,-1);}
        if(e.key=="8") { player.tryMove(0,-1);}
        if(e.key=="9") { player.tryMove(1,-1);}

        if(e.key=="1") { player.tryMove(-1,1);}
        if(e.key=="2") { player.tryMove(0,1);}
        if(e.key=="3") { player.tryMove(1,1);}

        if(e.key=="4") { player.tryMove(-1,0);}
        if(e.key=="6") { player.tryMove(1,0);}

        if(e.key=="5"){ 
          tile = player.tile;
          tile.interact(player);
        }

        if(e.key=="q") { player.tryMove(-1,-1);}
        if(e.key=="w") { player.tryMove(0,-1);}
        if(e.key=="e") { player.tryMove(1,-1);}

        if(e.key=="z") { player.tryMove(-1,1);}
        if(e.key=="x") { player.tryMove(0,1);}
        if(e.key=="c") { player.tryMove(1,1);}

        if(e.key=="a") { player.tryMove(-1,0);}
        if(e.key=="d") { player.tryMove(1,0);}

        if(e.key=="s"){ 
          tile = player.tile;
          tile.interact(player);
        }

        if(e.key=="e"){ //takeDamage(1);
        //spriteState = 1;
        player.sprite = 1;}
        if(e.key=="r"){
        //spriteState = 0;
        player.sprite = 0;}
        
        //if( getTile(x, y).passable == false){
        //  x = prevX;
        //  y = prevY;
        //}
      };
      }
      //console.log("V");
      setupCanvas();
      setInterval(draw, 5);
      
      //generateLevel();
      

      //player = new Player(randomPassableTile());
      </script>
      
    <p id="3">Time taken</p>
    <canvas id="canvas2" width="2000" height="400" style="border:1px solid #d3d3d3;">
  </body>
</html>